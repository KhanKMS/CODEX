-- Azure Container Registry 서비스 > 이미지 저장 --

ACR_NAME=acrkmsreg
ACR_RES_GROUP=$ACR_NAME

az group create --resource-group $ACR_RES_GROUP --location koreacentral
az acr create --resource-group $ACR_RES_GROUP --name $ACR_NAME --sku Standard --location koreacentral

LOGIN SERVER : acrkmsreg.azurecr.io

---- Azure Kubernetes Service 클러스터 작성 

ACR_ID=$(az acr show --name $ACR_NAME --query id --output tsv)

SP_NAME=sample-acr-service-principal

SP_PASSWD=$(az ad sp create-for-rbac --name $SP_NAME --role Reader --scopes $ACR_ID --query password --output tsv)

az ad sp show --id bd15c25c-a1bd-46e1-a364-33a7997985bb --query appId

APP_ID=

AKS_CLUSTERS_NAME=AKSCluster 


az aks create \
--name $AKS_CLUSTER_NAME \
--resource-group $AKS_RES_GROUP \
--node-count 3 \
--kubernetes-version 1.22.11 \
--node-vm-size Standard_DS2_v2 \
--generate-ssh-keys \
--service-principal $APP_ID \
--client-secret $SP_PASSWD

2146c3b4-a03d-4c8a-bd93-361d63b2455c
